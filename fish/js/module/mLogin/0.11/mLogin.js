(function(){function w(a){function b(i,k){var m,l,q,p,o;q=i&2147483648;p=k&2147483648;m=i&1073741824;l=k&1073741824;o=(i&1073741823)+(k&1073741823);if(m&l)return o^2147483648^q^p;return m|l?o&1073741824?o^3221225472^q^p:o^1073741824^q^p:o^q^p}function g(i,k,m,l,q,p,o){i=b(i,b(b(k&m|~k&l,q),o));return b(i<<p|i>>>32-p,k)}function j(i,k,m,l,q,p,o){i=b(i,b(b(k&l|m&~l,q),o));return b(i<<p|i>>>32-p,k)}function n(i,k,m,l,q,p,o){i=b(i,b(b(k^m^l,q),o));return b(i<<p|i>>>32-p,k)}function r(i,k,m,l,q,p,o){i=
b(i,b(b(m^(k|~l),q),o));return b(i<<p|i>>>32-p,k)}function v(i){var k="",m="",l;for(l=0;l<=3;l++){m=i>>>l*8&255;m="0"+m.toString(16);k+=m.substr(m.length-2,2)}return k}var h=[],x,y,z,A,c,d,e,f;a=function(i){i=i.replace(/\r\n/g,"\n");for(var k="",m=0;m<i.length;m++){var l=i.charCodeAt(m);if(l<128)k+=String.fromCharCode(l);else{if(l>127&&l<2048)k+=String.fromCharCode(l>>6|192);else{k+=String.fromCharCode(l>>12|224);k+=String.fromCharCode(l>>6&63|128)}k+=String.fromCharCode(l&63|128)}}return k}(a);h=
function(i){var k,m=i.length;k=m+8;for(var l=((k-k%64)/64+1)*16,q=Array(l-1),p=0,o=0;o<m;){k=(o-o%4)/4;p=o%4*8;q[k]|=i.charCodeAt(o)<<p;o++}q[(o-o%4)/4]|=128<<o%4*8;q[l-2]=m<<3;q[l-1]=m>>>29;return q}(a);c=1732584193;d=4023233417;e=2562383102;f=271733878;for(a=0;a<h.length;a+=16){x=c;y=d;z=e;A=f;c=g(c,d,e,f,h[a+0],7,3614090360);f=g(f,c,d,e,h[a+1],12,3905402710);e=g(e,f,c,d,h[a+2],17,606105819);d=g(d,e,f,c,h[a+3],22,3250441966);c=g(c,d,e,f,h[a+4],7,4118548399);f=g(f,c,d,e,h[a+5],12,1200080426);e=g(e,
f,c,d,h[a+6],17,2821735955);d=g(d,e,f,c,h[a+7],22,4249261313);c=g(c,d,e,f,h[a+8],7,1770035416);f=g(f,c,d,e,h[a+9],12,2336552879);e=g(e,f,c,d,h[a+10],17,4294925233);d=g(d,e,f,c,h[a+11],22,2304563134);c=g(c,d,e,f,h[a+12],7,1804603682);f=g(f,c,d,e,h[a+13],12,4254626195);e=g(e,f,c,d,h[a+14],17,2792965006);d=g(d,e,f,c,h[a+15],22,1236535329);c=j(c,d,e,f,h[a+1],5,4129170786);f=j(f,c,d,e,h[a+6],9,3225465664);e=j(e,f,c,d,h[a+11],14,643717713);d=j(d,e,f,c,h[a+0],20,3921069994);c=j(c,d,e,f,h[a+5],5,3593408605);
f=j(f,c,d,e,h[a+10],9,38016083);e=j(e,f,c,d,h[a+15],14,3634488961);d=j(d,e,f,c,h[a+4],20,3889429448);c=j(c,d,e,f,h[a+9],5,568446438);f=j(f,c,d,e,h[a+14],9,3275163606);e=j(e,f,c,d,h[a+3],14,4107603335);d=j(d,e,f,c,h[a+8],20,1163531501);c=j(c,d,e,f,h[a+13],5,2850285829);f=j(f,c,d,e,h[a+2],9,4243563512);e=j(e,f,c,d,h[a+7],14,1735328473);d=j(d,e,f,c,h[a+12],20,2368359562);c=n(c,d,e,f,h[a+5],4,4294588738);f=n(f,c,d,e,h[a+8],11,2272392833);e=n(e,f,c,d,h[a+11],16,1839030562);d=n(d,e,f,c,h[a+14],23,4259657740);
c=n(c,d,e,f,h[a+1],4,2763975236);f=n(f,c,d,e,h[a+4],11,1272893353);e=n(e,f,c,d,h[a+7],16,4139469664);d=n(d,e,f,c,h[a+10],23,3200236656);c=n(c,d,e,f,h[a+13],4,681279174);f=n(f,c,d,e,h[a+0],11,3936430074);e=n(e,f,c,d,h[a+3],16,3572445317);d=n(d,e,f,c,h[a+6],23,76029189);c=n(c,d,e,f,h[a+9],4,3654602809);f=n(f,c,d,e,h[a+12],11,3873151461);e=n(e,f,c,d,h[a+15],16,530742520);d=n(d,e,f,c,h[a+2],23,3299628645);c=r(c,d,e,f,h[a+0],6,4096336452);f=r(f,c,d,e,h[a+7],10,1126891415);e=r(e,f,c,d,h[a+14],15,2878612391);
d=r(d,e,f,c,h[a+5],21,4237533241);c=r(c,d,e,f,h[a+12],6,1700485571);f=r(f,c,d,e,h[a+3],10,2399980690);e=r(e,f,c,d,h[a+10],15,4293915773);d=r(d,e,f,c,h[a+1],21,2240044497);c=r(c,d,e,f,h[a+8],6,1873313359);f=r(f,c,d,e,h[a+15],10,4264355552);e=r(e,f,c,d,h[a+6],15,2734768916);d=r(d,e,f,c,h[a+13],21,1309151649);c=r(c,d,e,f,h[a+4],6,4149444226);f=r(f,c,d,e,h[a+11],10,3174756917);e=r(e,f,c,d,h[a+2],15,718787259);d=r(d,e,f,c,h[a+9],21,3951481745);c=b(c,x);d=b(d,y);e=b(e,z);f=b(f,A)}return(v(c)+v(d)+v(e)+
v(f)).toLowerCase()}function B(a){for(var b=[],g=null,j=0,n=a.elements.length;j<n;j++){g=a.elements[j];if(g.name!=="")switch(g.type){case "password":b.push(encodeURIComponent(g.name)+"="+encodeURIComponent(w(g.value)));break;case "button":break;case "checkbox":if(!g.checked)break;default:b.push(encodeURIComponent(g.name)+"="+encodeURIComponent(g.value))}}return b.join("&")}function s(a){return document.getElementById(a)}function t(a,b){return function(){b.apply(a,arguments)}}function u(a,b){if(a){a.style.visibility=
"visible";a.innerHTML=b}}function C(a){var b=function(){};b={url:"",timeout:8E3,inFormId:"",outFormId:"#",nameInputId:"",passWordInputId:"",remebInputId:"",validCodeInputId:"",enableUsername:true,loginBtnId:"",waitLoginId:"",logoutBtnId:"#",waitLogoutId:"#",tipsId:"#",userNameId:"#",onSuccessLogin:b,onSuccessExit:b,onPassFailed:b,onNameFailed:b,onLoginFailed:b,onExitFailed:b,onLogining:b,onExiting:b,onAbort:b,onTimeout:b};fish.lang.extend(b,a);fish.lang.extend(this,b);this.init()}function D(a){var b=
{url:"",timeout:8E3,onTimeout:function(){},onAbort:function(){},onError:function(){},onLoginCallBack:function(){},onExitCallBack:function(){},onStartLogin:function(){},onStartExit:function(){}};fish.lang.extend(b,a);fish.lang.extend(this,b);this.init()}window.MD5=w;var E=function(a){fish.lang.extend(this,a)};E.prototype={abort:function(){this.ajaxObj&&this.ajaxObj.abort()},send:function(){this.ajaxObj=fish.ajax({type:"json",url:this.url,timeout:this.timeout,data:this.data,fn:this.fn,err:this.err,
onTimeout:this.onTimeout})}};C.prototype={set:function(a){fish.lang.extend(this,a)},init:function(){this.inForm=s(this.inFormId);this.outForm=s(this.outFormId);this.nameInput=s(this.nameInputId);this.passWordInput=s(this.passWordInputId);this.remebInput=s(this.remebInputId);this.loginBtn=s(this.loginBtnId);this.logoutBtn=s(this.logoutBtnId);this.waitLogin=s(this.waitLoginId);this.waitLogout=s(this.waitLogoutId);this.tips=s(this.tipsId);this.userName=s(this.userNameId);this.validCodeInput=s(this.validCodeInputId);
var a=this;this.inForm.onsubmit=function(g){fish.preventDefault(g)};this.loginBtn.onclick=function(){a.login.call(a)};if(this.outForm)this.outForm.onsubmit=function(g){fish.preventDefault(g)};if(this.logoutBtn)this.logoutBtn.onclick=function(){a.exit.call(a)};this.nameInput.setAttribute("placeholderOption","\u624b\u673a/\u90ae\u7bb1");this.nameInput.onfocus=this.passWordInput.onfocus=function(){this.value=fish.trim(this.value);if(this.value===this.getAttribute("placeholderOption"))this.value="";this.style.color=
"#000000"};this.nameInput.onclick=this.passWordInput.onclick=function(){this.select()};var b;this.nameInput.onblur=b=function(){this.value=fish.trim(this.value);if(this.value===""){this.style.color="#666666";this.value=this.getAttribute("placeholderOption")}else this.style.color=this.value===this.getAttribute("placeholderOption")?"#666666":"#000000"};b.apply(this.nameInput);this.nameInput.onkeypress=this.passWordInput.onkeypress=this.remebInput.onkeypress=function(g){if((window.ActiveXObject?event.keyCode:
g.which)==13){fish.preventDefault(g);a.login()}};if(this.validCodeInput)this.validCodeInput.onkeypress=function(g){if((window.ActiveXObject?event.keyCode:g.which)==13){fish.preventDefault(g);a.login()}};this.lCore=new D({url:this.url,timeout:this.timeout,onTimeout:t(a,a.onTimeout),onError:t(a,a.onFailed),onLoginCallBack:t(a,a.onLoginCallBack),onExitCallBack:t(a,a.onExitCallBack),onStartLogin:t(a,a.onStartLogin),onStartExit:t(a,a.onStartExit),onAbort:t(a,a.onAbort)})},showLogining:function(){this.loginBtn.style.display=
"none";this.waitLogin.style.display="block";if(this.tips)this.tips.style.visibility="hidden";this.nameInput.disabled=this.passWordInput.disabled=this.remebInput.disabled="disabled"},showLoginNormal:function(){this.loginBtn.style.display="inline";this.waitLogin.style.display="none";if(this.enableUsername)this.nameInput.disabled=null;this.passWordInput.disabled=this.remebInput.disabled=null},showExiting:function(){if(this.logoutBtn)this.logoutBtn.style.display="none";if(this.waitLogout)this.waitLogout.style.display=
"block"},showExitNormal:function(){if(this.logoutBtn)this.logoutBtn.style.display="inline";if(this.waitLogout)this.waitLogout.style.display="none"},logState:function(){return this.lCore.logState()},login:function(){if(fish.trim(this.nameInput.value).length===0||fish.trim(this.nameInput.value)=="\u624b\u673a/\u90ae\u7bb1"){u(this.tips,"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d");this.onLoginFailed()}else if(fish.trim(this.passWordInput.value).length===0){u(this.tips,"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801");
this.onLoginFailed()}else if(this.validCodeInput&&fish.trim(this.validCodeInput.value).length===0){u(this.tips,"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");this.onLoginFailed()}else{this.lCore.login(this.inForm,this.timeout);this.passWordInput.value=""}},exit:function(){this.outForm&&this.lCore.exit(this.outForm,this.timeout)},abort:function(){if(this.logState()==="login")this.showLoginNormal();else this.logState()==="exit"&&this.showExitNormal();if(this.tips)this.tips.style.visibility="hidden";this.lCore.abort()},
onFailed:function(a){if(this.logState()==="login"){this.showLoginNormal();u(this.tips,"\u62b1\u6b49\uff0c\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\u3002");this.onLoginFailed(a)}else if(this.logState()==="exit"){this.showExitNormal();this.onExitFailed(a)}},onLoginCallBack:function(a){this.showLoginNormal();switch(a.state){case 100:this.onSuccessLogin(a);if(this.userName)this.userName.innerHTML=a.name;break;case 200:this.onPassFailed(a);this.onLoginFailed(a);this.passWordInput.select();u(this.tips,
"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002");break;case 300:this.onNameFailed(a);this.onLoginFailed(a);this.nameInput.select();u(this.tips,"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002");break;case 400:this.onLoginFailed(a);this.validCodeInput.select();u(this.tips,"\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002");break;default:this.onFailed(a)}},onExitCallBack:function(a){this.showExitNormal();
if(this.tips)this.tips.style.visibility="hidden";switch(a.state){case 100:this.onSuccessExit(a);fish.cookie.set({name:"loginRecord",days:-1});break;default:this.onFailed(a)}},onStartLogin:function(){this.onLogining();this.showLogining()},onStartExit:function(){this.onExiting();this.showExiting()}};D.prototype={init:function(){var a=this;this.ajaxObj=new E({url:this.url,timeout:this.timeout,data:"",fn:function(b){if(a.logState()==="login")a.onLoginCallBack(b);else if(a.logState()==="exit")a.onExitCallBack(b)},
onTimeout:a.onTimeout,err:a.onError})},logState:function(){if(this.ajaxObj.data.indexOf("action=login")>=0)return"login";else if(this.ajaxObj.data.indexOf("action=exit")>=0)return"exit"},login:function(a){this.onStartLogin();a=B(a);this.setCookie(a);this.ajaxObj.data=a+"&action=login";this.ajaxObj.send()},exit:function(a){this.onStartExit();this.ajaxObj.data=B(a)+"&action=exit";this.ajaxObj.send()},abort:function(){this.ajaxObj.abort();this.onAbort()},setCookie:function(a){a=a.split("&");for(var b=
7,g,j=true,n=a.length-1;n>=0;n--)if(a[n].indexOf("remIt")>=0&&a[n].indexOf("remIt")<=(g=a[n].indexOf("="))){b=parseInt(a[n].slice(g+1));if(isNaN(b)||b<=0){fish.cookie.set({name:"loginRecord",days:-1});return}a.splice(n,1);j=false;break}j?fish.cookie.set({name:"loginRecord",days:-1}):fish.cookie.set({name:"loginRecord",value:a.join("&"),days:b,domain:strHost,encode:false,path:"/"})}};var F={passnum:/^[\d|{a-zA-Z}]{6}$/,password:/^[\d|{a-zA-Z}]{6,16}$/};mLoginFn={bulidLogin:function(){fish.one(this.holder).html("bottom",
'<div id="mLogin_login" class="mLogin">                    <div class="mLogin_bg"></div>                    <div class="mLogin_content clearfix">                        <div class="top_login">                           <span class="btn_close"></span>                        </div>                        <div class="mLogin_info">                           <h3 class="pg_tit">                               \u767b\u5f55</h3>                           <form action="" id="login_form_pop_mLogin">                           <table cellspacing="0" cellpadding="0" border="0" class="login_content">                               <tbody>                                   <tr class="login_tips">                                       <th></th>                                       <td><span class=".none" id="titleTips_pop_mLogin" style="visibility:hidden;">\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef</span></td>                                   </tr>                                   <tr>                                       <th>                                           <label for="account_pop_mLogin">                                               \u767b\u5f55\u540d</label>                                       </th>                                       <td>                                           <input type="text" placeholder="\u624b\u673a/\u90ae\u7bb1" name="name" maxlength="30" id="account_pop_mLogin" placeholderoption="\u624b\u673a/\u90ae\u7bb1" >                                       </td>                                   </tr>                                   <tr>                                       <th>                                           <label for="actpwd_pop_mLogin">                                               \u5bc6\u7801</label>                                       </th>                                       <td>                                           <input type="password" name="pass" maxlength="30" id="actpwd_pop_mLogin">                                       </td>                                   </tr>                                   <tr class="none">                                       <th>                                       </th>                                       <td>                                           <input type="checkbox" checked="" id="rem_it_1w_pop_mLogin" class="ceck">                                           <label class="ri1_label" for="rem_it_1w_pop_mLogin">                                               \u8bb0\u4f4f\u5bc6\u7801\uff08\u4e00\u5468\uff09</label>                                       </td>                                   </tr>                                   <tr>                                       <th>                                       </th>                                       <td>                                           <a class="login_btn btn_outer clearfix" href="javascript:;" id="sign_in_btn_pop_mLogin"><span class="btn_inner">\u767b&nbsp;\u5f55</span></a>                                           <span id="logining_pop_mLogin" style="display: none;" class="wait4sign">                                               <img alt="" src="http://img1.40017.cn/cn/new_ui/public/images/wait.gif"></span>                                           <a class="forget_password" href="http://www.17u.cn/GetPassword.aspx" target="_blank">                                               \u5fd8\u8bb0\u5bc6\u7801\uff1f</a>                                       </td>                                       <tr class="partner none">                                           <th></th>                                           <td>                                               <div class="partnerLogin clearfix">                                                    <span class="l_baidu">                                                        <a class="a_partner" href="http://passport.17u.cn/Login/IntermediateParty/?FromType=baidu"                                                         nhref="http://passport.17u.cn/Login/IntermediateParty/?FromType=baidu&pageurl={backurl}"                                                          title="\u767e\u5ea6\u5e10\u53f7\u7ed1\u5b9a" rel="nofollow">\u767e\u5ea6</a>                                                    </span>                                               </div>                                           </td>                                       </tr>                                   </tr>                               </tbody>                           </table>                           </form>                        </div>                        <div class="mLogin_info l_border">                           <h3 class="pg_tit">                               \u76f4\u63a5\u9884\u8ba2</h3>                           <div class="yd_content"><p>\u6b64\u9884\u8ba2\u65b9\u5f0f\u5c06<span class="spec">\u65e0\u6cd5\u4eab\u53d7</span>\u70b9\u8bc4\u5956\u91d1\u3001\u73b0\u91d1\u5238\u548c\u79ef\u5206\u4f18\u60e0\u3002</p>                               <a class="yd_bton btn_outer clearfix" href="javascript:;" id="mLogin_btn"><span class="btn_inner">\u76f4\u63a5\u9884\u8ba2</span></a>                           </div>                        </div>                    </div>                </div>')},
bulidPass:function(){fish.one(this.holder).html("bottom",'<div id="mLogin_pass" class="mLogin_content submit_pass clearfix">                    <div class="top_login">                       <span class="btn_close"></span>                    </div>                    <p class="sns_sending clearfix">                        <span class="tips_top">\u6211\u4eec\u5df2\u5411\u60a8\u7684\u624b\u673a<span class="phonenum"></span>\u53d1\u9001\u9a8c\u8bc1\u7801\uff0c\u8bf7\u60a8\u6536\u5230\u540e\u8f93\u5165\u9a8c\u8bc1\u7801</span>                        <a class="sending_btn btn_a_outer clearfix" href="javascript:;"><span class="btn_a_inner">\u83b7\u53d6\u9a8c\u8bc1\u7801</span></a>                    </p>                    <p class="sns_valida clearfix">                        <label class="valida_label" for="valida_input">\u60a8\u6536\u5230\u7684\u9a8c\u8bc1\u7801\uff1a</label>                        <input id="valida_input" class="valida_code" maxlength="6" type=text value=""/>                        <span class="valida_tips">\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801</span>                        <span class="valida_err">\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u8f93</span>                    </p>                    <p class="btn_line clearfix">                        <a class="submit_btn btn_b_outer clearfix" href="javascript:;">                            <span class="btn_b_inner">\u63d0&nbsp;\u4ea4</span></a>                        <span style="display: none;" class="wait4sign_a submit_btn">                        <img alt="" src="http://img1.40017.cn/cn/new_ui/public/images/wait.gif"></span>                        <span class="btn_tips"></span>                    </p>                    <p class="tips_line">                        \u5982\u679c\u60a8\u7684\u624b\u673a\u5df2\u505c\u673a\u6216\u5176\u4ed6\u539f\u56e0\u65e0\u6cd5\u83b7\u53d6\u9a8c\u8bc1\u7801\uff0c\u8bf7\u81f4\u7535 4007-777-777 \u8f6c1 \u4eba\u5de5\u670d\u52a1                    </p>                </div>')},
bulidResetPass:function(){fish.one(this.holder).html("bottom",'<div id="mLogin_resetpass" class="mLogin_content new_pass clearfix">                    <div class="top_login">                       <span class="btn_close"></span>                    </div>                <table cellspacing="0" cellpadding="0" border="0" class="pass_content">                               <tbody>                                   <tr>                                       <th>                                           <label class="passlabel" for="mLogin_resetpassword">                                               \u65b0\u5bc6\u7801\uff1a</label>                                       </th>                                       <td>                                           <input type="password" class="passinput" id="mLogin_resetpassword" maxlength="30" >                                       </td>                                       <td>                                           <p class="tips">\u5bc6\u7801\u75316-16\u4f4d\u5b57\u7b26(\u5b57\u6bcd\u3001\u6570\u5b57)\u7ec4\u6210\uff0c\u533a\u5206\u5927\u5c0f\u5199</p><span class="valida_err password_new_err">\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u8f93</span>                                       </td>                                   </tr>                                   <tr>                                       <th>                                           <label class="passlabel" for="mLogin_repeatpassword">                                               \u786e\u8ba4\u5bc6\u7801\uff1a</label>                                       </th>                                       <td>                                           <input type="password" class="passinput" id="mLogin_repeatpassword" maxlength="30" >                                       </td>                                       <td>                                           <span class="valida_err password_repeat_err">\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u8f93</span>                                       </td>                                   </tr>                                   <tr class="btn_rol">                                       <th>                                       </th>                                       <td colspan="2">                                           <a class="pass_btn btn_b_outer clearfix" href="javascript:;"><span class="btn_b_inner">\u5b8c&nbsp;\u6210</span></a>                                           <span style="display: none;" class="wait4sign_a">                                               <img alt="" src="http://img1.40017.cn/cn/new_ui/public/images/wait.gif"></span>                                               <span class="btn_tips"></span>                                       </td>                                   </tr>                               </tbody>                           </table>                </div>')},
init:function(){function a(){fish.mPop.close();b.onClose()}var b=this;fish.dom("#mLogin_holder")||fish.one(document.body).html("bottom","<div id=mLogin_holder style='display:none'></div>");this.holder=fish.dom("#mLogin_holder");fish.dom("#mLogin_login")||this.bulidLogin();this.loginElem=fish.dom("#mLogin_login");fish.dom("#mLogin_pass")||this.bulidPass();this.passElem=fish.dom("#mLogin_pass");fish.dom("#mLogin_resetpass")||this.bulidResetPass();this.resetPassElem=fish.dom("#mLogin_resetpass");this.enableUsername||
fish.one("#account_pop_mLogin").attr("disabled","disabled");this.username&&fish.one("#account_pop_mLogin").val(this.username);this.title&&fish.all(".mLogin_bg",this.loginElem).html(this.title);if(this.showPartner){fish.all(".partner",this.loginElem).removeClass("none");fish.all(".a_partner").on("click",function(){this.href=this.getAttribute("nhref").replace("{backurl}",encodeURIComponent(window.location.href))})}fish.one(".btn_close",this.loginElem).on("click",a);fish.one(".btn_close",this.passElem).on("click",
a);fish.one(".btn_close",this.resetPassElem).on("click",a);if(this.showBooking){fish.all(".l_border",this.loginElem).css("display:block");fish.all(".yd_bton",this.loginElem).on("click",function(){b.onBooking();fish.mPop.close();b.onClose()})}else{fish.all(this.loginElem).css("width:298px");fish.all(".l_border",this.loginElem).css("display:none")}this.loginObj=new C({url:this.loginUrl,enableUsername:this.enableUsername,userNameId:"user_name",inFormId:"login_form_pop_mLogin",nameInputId:"account_pop_mLogin",
passWordInputId:"actpwd_pop_mLogin",remebInputId:"rem_it_1w_pop_mLogin",loginBtnId:"sign_in_btn_pop_mLogin",waitLoginId:"logining_pop_mLogin",tipsId:"titleTips_pop_mLogin",onSuccessLogin:function(g){b._loginSuc(g)}});fish.all("#mLogin_login .forget_password").on("click",function(g){fish.preventDefault(g);b.getPass();b.showPassBox();fish.one("#valida_input").val("");fish.all("#mLogin_resetpassword").val("");fish.all("#mLogin_repeatpassword").val("");b._hideVerifyPassTips();b._hideResetPassTips();b._hideRepeatPassErr();
b._hideNewPassErr();b._hidePassErr()});this.__timeoutTextElem=fish.one(".sending_btn .btn_a_inner",this.passElem);this.__passTipsElem=fish.one(".btn_tips",this.passElem);this.__usernameElem=fish.one("#account_pop_mLogin");this.__timeoutBtnElem=fish.one(".sending_btn",this.passElem).on("click",function(){b.__timeoutBtnElem.hasClass("btn_disable")||b.getPass()});this.__verifyPassBtnElem=fish.one(".submit_btn",this.passElem).on("click",function(){b.verifyPass()});this.__resetPassBtnElem=fish.one(".pass_btn",
this.resetPassElem).on("click",function(){b.resetPass()});this.__resetPassTipsElem=fish.one(".btn_tips",this.resetPassElem);this.__passInputElem=fish.all(".valida_code",this.passElem).on("click",function(){this.select()}).on("focus",function(){b._hidePassErr()}).on("onkeypress",function(g){if((window.ActiveXObject?event.keyCode:g.which)==13){fish.preventDefault(g);b.verifyPass()}});this.__newPassInputElem=fish.all("#mLogin_resetpassword").on("click",function(){this.select()}).on("focus",function(){b._hideNewPassErr()}).on("onkeypress",
function(g){if((window.ActiveXObject?event.keyCode:g.which)==13){fish.preventDefault(g);b.resetPass()}});this.__repeatPassInputElem=fish.all("#mLogin_repeatpassword").on("click",function(){this.select()}).on("focus",function(){b._hideRepeatPassErr()}).on("onkeypress",function(g){if((window.ActiveXObject?event.keyCode:g.which)==13){fish.preventDefault(g);b.resetPass()}});this.show&&this.open()},open:function(){this.onOpen&&this.onOpen();fish.mPop({content:this.loginElem})},showPassBox:function(){this.onPassBoxOpen&&
this.onPassBoxOpen();fish.one(".phonenum",this.passElem).html(this.getUsername());fish.mPop({content:this.passElem})},showResetBox:function(){this.onResetBoxOpen&&this.onResetBoxOpen();fish.mPop({content:this.resetPassElem})},startTimeout:function(){var a=this,b=this.getPassTimeout;if(this.getPassTimer){clearInterval(this.getPassTimer);this.getPassTimer=null}this._disableTimeoutBtn();this.getPassTimer=setInterval(function(){a._setTimeoutText(b+"\u79d2\u540e\u53ef\u91cd\u53d1");b--;b||a.stopTimeout()},
1E3)},stopTimeout:function(){clearInterval(this.getPassTimer);this.getPassTimer=null;this._setTimeoutText("\u83b7\u53d6\u9a8c\u8bc1\u7801");this._enableTimeoutBtn()},setUsername:function(a){this.__usernameElem.val(a)},getPass:function(){var a=this;if(!this.getPassTimer){fish.ajax({url:this.getPassUrl,data:"moblie="+this.getUsername(),type:"string",fn:function(b){a._getPassCallBack(b)},err:function(b){a._getPassErrBack(b)}});this._disableTimeoutBtn();this.startTimeout()}},verifyPass:function(){var a=
this,b=this.__passInputElem.val();this._hideVerifyPassTips();if(F.passnum.test(b)){this._hidePassErr();this._showPassLoading();fish.ajax({url:this.verifyPassUrl,data:"moblie="+encodeURIComponent(this.getUsername())+"&code="+this.getPassNum(),type:"string",fn:function(g){a._hidePassLoading();a._verifyPassCallBack(g)},err:function(g){a._hidePassLoading();a._verifyPassErrBack(g)}})}else this._showPassErr("\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u8f93")},resetPass:function(){var a=this,b=this.__newPassInputElem.val(),
g=this.__repeatPassInputElem.val();this._hideResetPassTips();if(F.password.test(b))if(b!==g)this._showRepeatPassErr("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4");else{this._showResetPassLoading();fish.ajax({url:this.resetPassUrl,data:"newpwd="+encodeURIComponent(this.getNewPass()),type:"string",fn:function(j){a._hideResetPassLoading();a._resetPassCallBack(j)},err:function(j){a._hideResetPassLoading();a._resetPassErrBack(j)}})}else this._showNewPassErr("\u5bc6\u7801\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165")},
getUsername:function(){return fish.trim(fish.one("#account_pop_mLogin").val())},getPassNum:function(){return fish.trim(fish.one("#valida_input").val())},getNewPass:function(){return fish.trim(fish.one("#mLogin_resetpassword").val())},_verifyPassCallBack:function(a){this.onGetPassAjaxBack&&this.onGetPassAjaxBack(a);if(a&&a==1)this._verifyPassSuc();else if(a)a=="047"?this._showVerifyPassTips("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u7684\u9a8c\u8bc1\u7801\u5df2\u7d2f\u8ba1\u8f93\u951910\u6b21\uff0c\u8bf7\u91cd\u65b0\u70b9\u51fb\u53d1\u9001\u624b\u673a\u9a8c\u8bc1\u7801\u3002"):
this._verifyPassErrBack();else this._verifyPassErrBack()},_verifyPassErrBack:function(){this._showVerifyPassTips("\u5bf9\u4e0d\u8d77\uff0c\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\u3002");this.stopTimeout();this._enableTimeoutBtn()},_getPassCallBack:function(a){this.onGetPassAjaxBack&&this.onGetPassAjaxBack(a);if(a&&a==1)this._getPassSuc();else if(a)if(a=="3")this._showVerifyPassTips("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u672c\u6708\u7533\u8bf7\u4fee\u6539\u5bc6\u7801\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650\uff0c\u5982\u60a8\u4ecd\u9700\u4fee\u6539\u5bc6\u7801\uff0c\u8bf7\u81f4\u75354007-777-777\u3002");
else if(a=="007")this._showVerifyPassTips("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002");else if(a=="049")this._showVerifyPassTips("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u672c\u6708\u7533\u8bf7\u4fee\u6539\u5bc6\u7801\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650\uff0c\u5982\u60a8\u4ecd\u9700\u4fee\u6539\u5bc6\u7801\uff0c\u8bf7\u81f4\u75354007-777-777\u3002");else a=="010"||a=="003"?this._showVerifyPassTips("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u7684\u624b\u673a\u53f7\u8fd8\u672a\u6ce8\u518c\uff0c\u7acb\u5373<a target='_blank' href='http://www.17u.cn/reg.aspx'>\u6ce8\u518c</a>"):
this._getPassErrBack();else this._getPassErrBack()},_getPassErrBack:function(){this._showVerifyPassTips("\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01");this.stopTimeout()},_resetPassCallBack:function(a){this.onResetPassAjaxBack&&this.onResetPassAjaxBack(a);if(a&&a==1)this._resetPassSuc();else if(a)a=="3"?this._showResetPassTips("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u672c\u6708\u7533\u8bf7\u4fee\u6539\u5bc6\u7801\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650\uff0c\u5982\u60a8\u4ecd\u9700\u4fee\u6539\u5bc6\u7801\uff0c\u8bf7\u81f4\u75354007-777-777\u3002"):
this._resetPassErrBack()},_resetPassErrBack:function(){this._showResetPassTips("\u8bbe\u7f6e\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")},_showVerifyPassTips:function(a){this.__passTipsElem.css("display:block").html(a)},_hideVerifyPassTips:function(){this.__passTipsElem.css("display:none")},_showResetPassTips:function(a){this.__resetPassTipsElem.css("display:block").html(a)},_hideResetPassTips:function(){this.__resetPassTipsElem.css("display:none")},_showPassErr:function(a){fish.all(".valida_tips",
this.passElem).css("display:none");fish.all(".valida_err",this.passElem).css("display:inline").html(a)},_hidePassErr:function(){fish.all(".valida_tips",this.passElem).css("display:inline");fish.all(".valida_err",this.passElem).css("display:none")},_showNewPassErr:function(a){fish.all(".tips",this.resetPassElem).css("display:none");fish.all(".password_new_err",this.resetPassElem).css("display:inline").html(a)},_hideNewPassErr:function(){fish.all(".tips",this.resetPassElem).css("display:block");fish.all(".password_new_err",
this.resetPassElem).css("display:none")},_showRepeatPassErr:function(a){fish.all(".password_repeat_err",this.resetPassElem).css("display:inline").html(a)},_hideRepeatPassErr:function(){fish.all(".password_repeat_err",this.resetPassElem).css("display:none")},_showPassLoading:function(){fish.browser("ms",6)?fish.all(".wait4sign_a",this.passElem).css("display:inline"):fish.all(".wait4sign_a",this.passElem).css("display:block");fish.all(".btn_b_outer",this.passElem).css("display:none")},_hidePassLoading:function(){fish.all(".wait4sign_a",
this.passElem).css("display:none");fish.browser("ms",6)?fish.all(".btn_b_outer",this.passElem).css("display:inline"):fish.all(".btn_b_outer",this.passElem).css("display:block")},_showResetPassLoading:function(){fish.all(".wait4sign_a",this.resetPassElem).css("display:block");fish.all(".btn_b_outer",this.resetPassElem).css("display:none")},_hideResetPassLoading:function(){fish.all(".wait4sign_a",this.resetPassElem).css("display:none");fish.all(".btn_b_outer",this.resetPassElem).css("display:block")},
_loginSuc:function(){this.reload&&location.reload();this.onLogin();fish.mPop.close();this.onClose()},_getPassSuc:function(){this.startTimeout()},_getPassErr:function(){},_verifyPassSuc:function(){this.showResetBox()},_verifyPassErr:function(){},_resetPassSuc:function(){fish.one("#actpwd_pop_mLogin").val(this.getNewPass());this.loginObj.login()},_setTimeoutText:function(a){this.__timeoutTextElem.html(a)},_enableTimeoutBtn:function(){this.__timeoutBtnElem.removeClass("btn_disable")},_disableTimeoutBtn:function(){this.__timeoutBtnElem.addClass("btn_disable")}};
fish.extend({mLogin:function(a,b){var g=function(){};g={title:"",show:false,showBooking:false,showPartner:false,enableUsername:true,username:"",loginUrl:"/Member/MemberLoginAjax.aspx",getPassUrl:"/GetPasswordAjaxCall.aspx?Type=GetCodeByMoblie",verifyPassUrl:"/GetPasswordAjaxCall.aspx?Type=ValidCodeByMoblie",resetPassUrl:"/GetPasswordAjaxCall.aspx?Type=ChangePassword&typeid=1",getPassTimeout:60,getPassTimer:null,reload:false,onLogin:g,onOpen:g,onPassBoxOpen:g,onResetBoxOpen:g,onBooking:g,onClose:g};
var j;j=fish.lang.proto(mLoginFn);fish.lang.extend(g,a);fish.lang.extend(j,g);j.init();b&&b(j);return j}})})();
