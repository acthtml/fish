(function(){fish.extend({mSlider:function(C,t){function n(i){if(!(a.circle&&k)){c=i;if(!a.circle)if(c>=f)c=0;else if(c<0)c=f-1;D()}}function u(){a.circle&&k||n(++c)}function v(){w&&clearTimeout(w);o=setTimeout(r,a.moveTime)}function x(){clearTimeout(o)}function D(){if(c<0){for(var i=-c*a.scrollNum,l=0;l<i;l++)g.html("top",fish.all(a.content+":last-child",y));g.css(s+":"+c*z+"px");c=0}A=-(c*z);k=g.anim(s+":"+A+"px",300,function(){if(a.circle&&c>0){for(var j=c*a.scrollNum,B=0;B<j;B++)g.html("bottom",
fish.all(a.content+":first-child",y));g.css(s+":0px");c=0}k=null});if(h){h.removeClass("current");fish.one(h[c]).addClass("current")}}function r(){u();o=setTimeout(r,a.moveTime)}if(this[0]){var a={scrollNum:1,autoScroll:true,moveTime:3500,direction:"x",showNav:"orange",circle:false,canvas:".mSlider_con",content:".mSlider_con li",nav:".mSlider_nav li"};fish.lang.extend(a,C);var A=0,c=0,w,b=fish.all(a.content,this),f=b.length,g=fish.all(a.canvas,this),y=this,h,k,e=a.direction==="x"?b.width():b.height(),
s=a.direction==="x"?"left":"top";b=a.direction==="x"?"width":"height";var z=e*a.scrollNum,o;this.css("position:relative;overflow:hidden;");g.css("position:relative;"+b+":"+(f+1)*e+"px");if(a.autoScroll){o=setTimeout(r,a.moveTime);this.hover(x,v)}if(a.showNav){var p,q;switch(a.showNav){case "orange":b="<ul class='mSlider_nav_orange mSlider_nav'>";for(var d=0,m=f;d<m;d++)b+="<li><a href='javascript:void(0)'>"+(d+1)+"</a></li>";b+="</ul>";this.html("bottom",b);break;case "bottom-green":b='<div class="mSlider_nav_bg"></div><div class="mSlider_nav_bottom_green mSlider_nav clearfix"><div class="holder clearfix">';
p=fish.all("a",g);q=e*a.scrollNum/f+"px";d=0;for(m=f;d<m;d++){e=fish.one(p[d]).attr("title");b+='<a style="width:'+q+';" href="javascript:void(0);" title="'+e+'"><span>'+e+'</span><i class="outter">\u25c6</i></a>'}b+="</div></div>";this.html("bottom",b);a.nav=".mSlider_nav a";break;case "earth-yellow":b='<div class="mSlider_nav_bg"></div><div class="mSlider_nav_earth_yellow mSlider_nav clearfix"><div class="holder clearfix">';p=fish.all("a",g);q=e*a.scrollNum/f+"px";d=0;for(m=f;d<m;d++){e=fish.one(p[d]).attr("title");
b+='<a style="width:'+q+';" href="javascript:void(0);" title="'+e+'"><span>'+e+'</span><i class="outter">\u25c6</i></a>'}b+="</div></div>";this.html("bottom",b);a.nav=".mSlider_nav a"}h=fish.all(a.nav,this);h.on("mouseover",function(){for(var i=0,l=h.removeClass("current"),j=0;j<l.length;j++)if(this===l[j])i=j;fish.one(this).addClass("current");n(i)})}fish.one(h).addClass("current");b={startScroll:v,stopScroll:x,scrollTo:n,scrollNext:u,scrollPrev:function(){a.circle&&k||n(--c)}};t&&t(b);return b}}})})();
