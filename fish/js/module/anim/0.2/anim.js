(function(f){function s(a,b,c){return(a+(b-a)*c).toFixed(3)}function n(a){var b=a.match(/[\-\d\.]+/g);b=b&&b[0];a=a.split(b);b=parseFloat(b);return{v:b?b:0,f:s,u:a}}function t(a){for(var b=a.length,c=[];b--;)c[c[b]=a[b]]=n(a[c[b]]);return c}function u(){for(var a=this.elem.length;a--;)cancelAnimationFrame(this.elem[a].timer())}function v(a){if(a)this.animHandler=a;return this.animHandler}function w(a,b,c,i){a.timer=v;b=fish.css.normalize(b);var e=t(b);b=a.currentStyle?a.currentStyle:getComputedStyle(a,
null);for(var d,h={},j,m,o=c.time||200,x=c.easing||function(g){return Math.sqrt(1-Math.pow(g-1,2))},p=a.timer(),q=e.length;q--;){d=e[q];if(c=a.style[d]||b[d])h[d]=n(c)}p!=null&&cancelAnimationFrame(p);requestAnimationFrame(function(g){j=g;m=g+o});a.timer(requestAnimationFrame(function(g){for(var y=g>=m?1:(g-j)/o,r=e.length;r--;){d=e[r];if(h[d])a.style[d]=e[d].u[0]+e[d].f(h[d].v,e[d].v,x(y))+e[d].u[1]}if(g>=m){cancelAnimationFrame(a.timer());i&&i(a)}else a.timer(requestAnimationFrame(arguments.callee))}));
return a}for(var l=["ms","moz","webkit","o"],k=0;k<l.length&&!f.requestAnimationFrame;++k){f.requestAnimationFrame=window[l[k]+"RequestAnimationFrame"];f.cancelAnimationFrame=f[l[k]+"CancelAnimationFrame"]||f[l[k]+"CancelRequestAnimationFrame"]}if(!f.requestAnimationFrame||!f.cancelAnimationFrame){f.requestAnimationFrame=function(a){return setTimeout(function(){a(+new Date)},1)};f.cancelAnimationFrame=function(a){clearTimeout(a)}}fish.extend({anim:function(a,b,c){var i=this.length,e=this.length,d=
0,h={elem:[],stop:u},j=c&&c.fn||c||null;c=c||{};for(c.time=b;i--;)h.elem.push(w(this[i],a,c,function(){d++;d>=e&&typeof j==="function"&&j()}));return h}})})(window);
