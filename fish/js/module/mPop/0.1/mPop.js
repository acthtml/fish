(function(){function m(){if(g){fish.all(n+" > *").each(function(){g.insertBefore(this,k)});g=null}else h.html("")}var g,k,n="#poperContent div.cenholder",i,e,h,c,l,j={html:"",top:"auto"},f=function(b){if(b){var d={html:"",top:"auto"};if(!fish.all("#poperCover")[0]){fish.all("body").html("bottom","<div id='poperCover' class='poplayout' style='display:none'></div><div id='poperContent' class='cenlayout'  style='display:none'><div class='cenholder'></div></div>");i=fish.all("#poperCover");e=fish.all("#poperContent");
h=fish.all(n);c=fish.all(window);l=fish.all(document);i.on("click",f.close);c.on("resize",f.setPos)}m();var a=b.content;fish.lang.extend(d,b);if(typeof a==="string")d.html=a;else if(a.nodeType===1){g=a.parentNode;k=a.nextSibling;d.html=a}else if(a[0]&&a[0].nodeType===1){g=a[a.length-1].parentNode;k=a[a.length-1].nextSibling;d.html=a}fish.lang.extend(j,d);h.html("bottom",j.html);setTimeout(function(){f.setPos()},0);e.css("display:block");i.css("display:block");b=fish.all("select");b.clear(fish.all("select",
e));b.css("visibility:hidden")}};f.setPos=function(){var b,d,a=h.width();b=j.top==="auto"?c.scrollTop()+c.height()/2-h.height()/2:parseInt(j.top,10)+c.scrollTop();d=c.scrollLeft()+c.width()/2-a/2;e.css("top:"+b+"px; left:"+d+"px; width:"+a+"px");fish.browser("ms",6)&&i.css("position:absolute; width:"+l.width()+"px; height:"+Math.max(l.height(),c.height())+"px")};f.close=function(){e.css("display:none");i.css("display:none");var b=fish.all("select");b.clear(fish.all("select",e));b.css("visibility:visible");
m()};fish.extend({mPop:f})})();
