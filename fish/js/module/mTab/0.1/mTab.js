(function(){function k(a){if(!a.length)throw Error("mTab \u521d\u59cb\u5316\u5931\u8d25");}function l(a,c){this.cfg={tab:false,tab_tray:false,append:"crt",replace:false,normal:false,content:false,none:"none",event:"click",init:false,fn:false};this.org=c;var d;d=this.cfg;if(a){for(var b in d)if(a[b])d[b]=a[b];d=true}else d=false;if(!d)throw Error("\u6ca1\u6709\u4f20\u9012\u914d\u7f6e\u5bf9\u8c61");}l.prototype={constructor:l,last_tab:false,cur_tab:false,last_tray:false,cur_tray:false,execute:function(){var a=
this,c,d,b=a.cfg,m=a.org,p=b.event==="hover"?"mouseover":b.event,j;b.init&&b.init.apply({org:a.org,cfg:a.cfg});if(b.tab_tray&&!b.tab){c=fish.one(b.tab_tray,m);k(c);j=c[0]}else if(b.tab&&!b.tab_tray){c=fish.all(b.tab,m);k(c);j=c[0].parentNode}a.last_tab=b.replace&&b.normal?fish.one("."+b.replace,j):fish.one("."+b.append,j);k(a.last_tab);if(b.content){d=fish.all(b.content,m);k(d);a.last_tray=fish.one(d[0])}c.on(p,function(f){var o=d,g=j;f=fish.getTarget(f);var e=a.cfg,i=false;do{if(f.parentNode===g){i=
true;break}f=f.parentNode||null}while(f);if(i&&f!==a.last_tab[0]){b:{g=f;var h=g.parentNode.children;i=[];for(var n=h.length;n--;)h[n].nodeType===1&&i.unshift(h[n]);h=i.length;if(h<2)g=-1;else{for(;h--;)if(i[h]===g){g=h;break b}g=void 0}}if(g!==-1){a.cur_tab=fish.one(f);if(e.replace&&e.normal){a.last_tab[0].className=e.normal;a.cur_tab[0].className=e.replace}else{a.last_tab.removeClass(e.append);a.cur_tab.addClass(e.append)}a.last_tab=a.cur_tab;if(o.length>1){a.last_tray.addClass(e.none);a.cur_tray=
fish.one(o[g]);a.cur_tray.removeClass(e.none);a.last_tray=a.cur_tray}e.fn&&e.fn.apply({org:a.org,cfg:a.cfg},[a.last_tab,a.last_tray])}}})}};fish.extend({mTab:function(a){for(var c=this.length;c--;)(new l(a,fish.one(this[c]))).execute()}})})();
